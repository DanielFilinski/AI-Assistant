(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{63:(e,r,s)=>{"use strict";var a=s(7260);s.o(a,"useRouter")&&s.d(r,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(r,{useSearchParams:function(){return a.useSearchParams}})},4650:(e,r,s)=>{Promise.resolve().then(s.bind(s,5404))},5404:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>l});var a=s(5155),t=s(2115),n=s(63);function i(){let[e,r]=(0,t.useState)(""),[s,i]=(0,t.useState)(!1),[l,d]=(0,t.useState)(null),[o,c]=(0,t.useState)(null);(0,n.useRouter)();let u=(0,n.useSearchParams)().get("error"),m=async r=>{r.preventDefault(),i(!0),c(null),d(null);try{let r=await fetch("/api/auth/start",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})}),s=await r.json();s.success&&s.data?d(s.data.magicLink):c(s.error||"Failed to send magic link")}catch(e){c("An error occurred. Please try again."),console.error("Login error:",e)}finally{i(!1)}};return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:(0,a.jsxs)("div",{className:"max-w-md w-full bg-white rounded-lg shadow-xl p-8",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Smart Form Assistant"}),(0,a.jsx)("p",{className:"text-gray-600",children:"AI-powered job application form with auto-save"})]}),u&&(0,a.jsx)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,a.jsx)("p",{className:"text-red-700 text-sm",children:{invalid_token:"Invalid magic link token",expired_token:"Magic link has expired. Please request a new one.",user_not_found:"User not found",verification_failed:"Verification failed. Please try again.",server_error:"Server error. Please try again later."}[u]||"An error occurred"})}),o&&(0,a.jsx)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,a.jsx)("p",{className:"text-red-700 text-sm",children:o})}),l?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[(0,a.jsx)("p",{className:"text-green-800 font-medium mb-2",children:"âœ“ Magic link generated!"}),(0,a.jsx)("p",{className:"text-green-700 text-sm mb-4",children:"In production, this would be sent to your email. For testing, click the link below:"}),(0,a.jsx)("a",{href:l,"data-testid":"magic-link",className:"block p-3 bg-white border border-green-300 rounded text-sm break-all text-indigo-600 hover:bg-green-50 transition-colors",children:l})]}),(0,a.jsx)("button",{onClick:()=>{d(null),r("")},className:"w-full text-gray-600 py-2 px-4 rounded-lg font-medium hover:bg-gray-100 transition-colors",children:"Send Another"})]}):(0,a.jsxs)("form",{onSubmit:m,className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),(0,a.jsx)("input",{type:"email",id:"email",name:"email",value:e,onChange:e=>r(e.target.value),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"you@example.com",disabled:s})]}),(0,a.jsx)("button",{type:"submit",disabled:s,className:"w-full bg-indigo-600 text-white py-2 px-4 rounded-lg font-medium hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:s?"Sending...":"Send Magic Link"})]}),(0,a.jsx)("div",{className:"mt-6 text-center text-sm text-gray-500",children:(0,a.jsx)("p",{children:"No password needed. We'll send you a secure link to sign in."})})]})})}function l(){return(0,a.jsx)(t.Suspense,{fallback:(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-purple-50",children:(0,a.jsx)("div",{className:"bg-white rounded-2xl shadow-xl p-8 w-full max-w-md",children:(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("div",{className:"animate-pulse",children:"Loading..."})})})}),children:(0,a.jsx)(i,{})})}}},e=>{e.O(0,[441,255,358],()=>e(e.s=4650)),_N_E=e.O()}]);